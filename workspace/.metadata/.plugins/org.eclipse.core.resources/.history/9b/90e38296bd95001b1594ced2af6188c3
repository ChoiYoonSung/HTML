<!DOCTYPE html>
<html lang="kr">
	<head>
		<meta charset="UTF-8">
		<title>Insert title here</title>
		<script src="../../js/jquery-3.6.0.js"></script>
	</head>
	<body>
		<h3>XMLHttpRequest 사용</h3>
		<button type="button" id="btnGetA">GET 비동기(async) 호출</button>
		<button type="button" id="btnGetS">GET 동기(sync) 호출</button>
		<hr>
		<div id="divResult" style="border: 1px solid; height: 300px; overflow: auto;">
		</div>
	</body>
	<script type="text/javascript">
	$('#btnGetA').click(function(){
		// XMLHttpRequest 객체로 호출
		// 1) XMLHttpRequest 객체 생성
		var xhttp = new XMLHttpRequest();
		// 2) 서버(, 페이지 등) 연결하기 - open(method, url, async)
		var url = "jquery_test.html"
		xhttp.open("GET", url, true);
		// 4) 결과처리
		xhttp.onreadystatechange = function() {
			// 상태 : 요청이 처리완료됨(데이터 받음), 서버에서 요청이 정상 처리됨.
			if (this.readyState == 4 && this.status == 200) {
				// 정상 처리 되었을 때 화면 처리 할 내용
				$('#divResult').html(this.responseText);
			};
		};
		// 3) 서버(, 페이지 등) 전송하기 - send();
		xhttp.send();
		
	})
	$('#btnGetS').click(function(){
		// XMLHttpRequest 객체로 호출
		// 1) XMLHttpRequest 객체 생성
		var xhttp = new XMLHttpRequest();
		// 2) 서버(, 페이지 등) 연결하기 - open(method, url, async)
		var url = "jquery_test.html"
		xhttp.open("GET", url, false);	// 동기식 호출로 변경
		// 3) 서버(, 페이지 등) 전송하기 - send();
		xhttp.send();
		
		// 4) 결과처리
		xhttp.onreadystatechange = function() {
			// 상태 : 요청이 처리완료됨(데이터 받음), 서버에서 요청이 정상 처리됨.
			if (this.readyState == 4 && this.status == 200) {
				// 정상 처리 되었을 때 화면 처리 할 내용
				$('#divResult').html(this.responseText);
			};
		};
	})
	
	</script>
</html>