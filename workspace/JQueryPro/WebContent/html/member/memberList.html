<!DOCTYPE html>
<html lang="kr">
	<head>
		<meta charset="UTF-8">
		<title>memberList</title>
		<script src="../../js/jquery-3.6.0.js"></script>
		<script type="text/javascript">
			$(document).ready(function() {
				$('#btnSearch').click(function() {
	
					var userId = $("#userId").val();
					var userName = $("#userName").val();
					var param = {
						memId : userId,
						memName : userName,
						flag : "L"
					};
	
					$.ajax({
						url : "/JQueryPro/MemberServlet",
						type : "post",
						data : param,
						dataType : "json",
						success : function(data) {
							console.log(data);
							alert("성공");
							makeTable(data);
						},
						error : function(xhr) {
							console.log(xhr);
							alert("오류발생");
						}
					})
				})
			})
	
			function makeTable(data) {
				var str = "";
	
				for (var i = 0; i < data.length; i++) {
					str += "<tr>" 
						+ "<td>" + data[i].id + "</td>";
						+ "<td>" + data[i].name + "</td>" 
						+ "<td>" + data[i].gender + "</td>"
						+ "<td>" + data[i].birth + "</td>" 
						+ "<td>" + data[i].tel+ "</td>" 
						+ "</tr>";
				}
	
				$("#tbResult tbody").html(str);
			}
		</script>
	</head>
	<body>
		<div>
			<h3>회원목록</h3>
			<!-- 검색조건 -->
			<div id="divSearch">
				ID : <input type="text" name="searchId" id="userId">
				이름 : <input type="text" name="searchName" id="userName">
				<button id="btnSearch" type="button">조회</button>
			</div>
			<!-- 검색결과 -->
			<div id="divResult">
				<table style="border: 1px solid; width: 100%;" id="tbResult">
				<colgroup>
					<col style="width: 100px;">
					<col style="width: auto;">
				</colgroup>
				<thead>
					<tr>
						<th>ID</th>
						<th>이름</th>
						<th>성별</th>
						<th>생년월일</th>
						<th>전화번호</th>
					</tr>					
				</thead>
				<tbody>
				</tbody>
					<tr>
						<td><span style="width: 100%">검색 버튼을 클릭하세요</span></td>
					</tr>
				</table>
			</div>
			<!-- 신규등록 -->
			<div id="divRegi">
				<button type="button">신규 등록</button>
			</div>
		</div>
	</body>
</html>